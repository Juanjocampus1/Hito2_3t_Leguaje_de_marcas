---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
import Title from '../components/Title.astro';
import Resultados from '../components/Resultados.astro';
import form from '../Data/form.json';
import Footer from '../components/Footer.astro';
---

<Layout title="Encuesta">
	<main class="flex flex-col h-screen justify-start items-center">
		<div class="mt-0">
			<Title title="Resultados de la encuesta" />
		</div>
		<div class="filter-container mt-4">
			<label for="gender">Sexo:</label>
			<select id="gender">
				<option value="">Todos</option>
				<option value="Hombre">Hombre</option>
				<option value="Mujer">Mujer</option>
			</select>

			<label for="age">Edad:</label>
			<input type="number" id="age" placeholder="Filtrar por edad" />

			<button id="filterButton">Filtrar</button>
		</div>
		<ul id="results" class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
			{form.map((item) => (
				<li class="bg-white rounded-lg shadow-md p-6 transition-all duration-200 ease-in-out transform hover:scale-105">
					<h2 class="text-xl font-bold mb-2"><strong>Nombre:</strong> {item.Nombre}</h2>
					<p class="social-body"><strong>Edad:</strong> {item.Edad} años</p>
					<p class="social-body"><strong>Sexo:</strong> {item.sexo}</p>
					<p class="social-body"><strong>Sistema Operativo:</strong> {item.SistemaOperativo}</p>
					<p class="social-body"><strong>¿Conoces la diferencia entre windows y linux?, explicala:</strong> {item.Diferencia}</p>
					<p class="social-body"><strong>¿Te has preguntado alguna vez como hablamos con las maquinas, como crees que se hace?:</strong> {item.Hablamos}</p>
					<p class="social-body"><strong>¿Conoces algún lenguaje de programación, si es así cuales?:</strong> {item.Lenguaje}</p>
					<p class="social-body"><strong>¿Estarías dispuesto a aprender un lenguaje de programación que te ayude en tu día a día?:</strong> {item.Aprender}</p>
					<p class="social-body"><strong>¿Te preocupa el rápido avance de la inteligencia artificial?, ¿por qué?:</strong> {item.Preocupacion}</p>
					<p class="social-body"><strong>¿Crees que esta podría acabar con los desarrolladores de software a largo y corto plazo, si es así, ¿por qué?:</strong> {item.Desarrolladores}</p>
				</li>
			))}
		</ul>
		<Footer />
	</main>
</Layout>

<script>
	const filterButton = document.getElementById('filterButton');
	filterButton.addEventListener('click', () => {
		const gender = document.getElementById('gender').value;
		const age = document.getElementById('age').value;
		const resultsContainer = document.getElementById('results');

		// Filtrar resultados
		const filteredForm = form.filter((item) => {
			const genderMatch = gender === '' || item.sexo === gender;
			const ageMatch = age === '' || item.Edad === parseInt(age, 10);
			return genderMatch && ageMatch;
		});

		// Limpiar resultados anteriores
		resultsContainer.innerHTML = '';

		// Renderizar resultados filtrados
		filteredForm.forEach((item) => {
			const li = document.createElement('li');
			li.className = 'bg-white rounded-lg shadow-md p-6 transition-all duration-200 ease-in-out transform hover:scale-105';
			li.innerHTML = `
				<h2 class="text-xl font-bold mb-2"><strong>Nombre:</strong> ${item.Nombre}</h2>
				<p class="social-body"><strong>Edad:</strong> ${item.Edad} años</p>
				<p class="social-body"><strong>Sexo:</strong> ${item.sexo}</p>
				<p class="social-body"><strong>Sistema Operativo:</strong> ${item.SistemaOperativo}</p>
				<p class="social-body"><strong>¿Conoces la diferencia entre windows y linux?, explicala:</strong> ${item.Diferencia}</p>
				<p class="social-body"><strong>¿Te has preguntado alguna vez como hablamos con las maquinas, como crees que se hace?:</strong> ${item.Hablamos}</p>
				<p class="social-body"><strong>¿Conoces algún lenguaje de programación, si es así cuales?:</strong> ${item.Lenguaje}</p>
				<p class="social-body"><strong>¿Estarías dispuesto a aprender un lenguaje de programación que te ayude en tu día a día?:</strong> ${item.Aprender}</p>
				<p class="social-body"><strong>¿Te preocupa el rápido avance de la inteligencia artificial?, ¿por qué?:</strong> ${item.Preocupacion}</p>
				<p class="social-body"><strong>¿Crees que esta podría acabar con los desarrolladores de software a largo y corto plazo, si es así, ¿por qué?:</strong> ${item.Desarrolladores}</p>
			`;
			resultsContainer.appendChild(li);
		});
	});
</script>

<style>
	.filter-container {
		margin-bottom: 20px;
	}
	.filter-container label {
		margin-right: 10px;
	}
	.filter-container select,
	.filter-container input {
		margin-right: 10px;
		padding: 5px;
	}
	.filter-container button {
		padding: 5px 10px;
		background-color: #007BFF;
		color: white;
		border: none;
		border-radius: 5px;
		cursor: pointer;
		transition: background-color 0.3s;
	}
	.filter-container button:hover {
		background-color: #0056b3;
	}
	.results-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
		gap: 20px;
	}
	.social-body {
		margin-bottom: 10px;
	}
</style>
